{"version":3,"sources":["./src/app/services/users.service.ts","./src/app/components/auth/auth.routing.module.ts","./src/app/components/auth/login/login.component.ts","./src/app/components/auth/login/login.component.html","./src/app/components/auth/auth.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACN;AAC4C;AAErC;;;AAErC,MAAM,WAAW;IAMtB,YAAoB,KAAiB;QAAjB,UAAK,GAAL,KAAK,CAAY;QACnC,IAAI,CAAC,GAAG,GAAG,CAAC,uDAAM,CAAC,KAAK,CAAC,EAAC,CAAC,uBAAuB,EAAC,CAAC,4BAA4B,CAAC;IACnF,CAAC;IAED,KAAK,CAAC,GAAG,EAAE,QAAQ;QACjB,IAAI,MAAM,GAAG;YACX,GAAG,EAAE,GAAG;YACR,QAAQ,EAAE,QAAQ;SACnB;QAED,IAAI,OAAO,GAAG,IAAI,gEAAW,CAAC;YAC5B,cAAc,EAAE,kBAAkB;SACnC,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,oBAAoB,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;aAClF,IAAI,CAAC,0DAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED,oBAAoB,CAAC,IAAI;QACvB,IAAI,MAAM,GAAG,IAAI;QACjB,MAAM,KAAK,GAAG,cAAc,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAExD,IAAI,OAAO,GAAG,IAAI,gEAAW,CAAC;YAC5B,cAAc,EAAE,kBAAkB;YAClC,cAAc,EAAE,SAAS,GAAG,KAAK;SAClC,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,gCAAgC,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;aAC9F,IAAI,CAAC,0DAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAC3B,CAAC;;sEAnCU,WAAW;8FAAX,WAAW,WAAX,WAAW;6FAAX,WAAW;cADvB,wDAAU;;;;;;;;;;;;;;ACLX;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACE;;;AAEzD,MAAM,MAAM,GAAW;IACrB,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,qEAAc,EAAG;CACzC,CAAC;AAMK,MAAM,iBAAiB;;gGAAjB,iBAAiB;4JAAjB,iBAAiB,kBAHnB,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,iBAAiB,uFAFlB,4DAAY;6FAEX,iBAAiB;cAJ7B,sDAAQ;eAAC;gBACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;aACxB;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACkB;AAGP;AAC9B;;;;;;AASxB,MAAM,cAAc;IAKzB,YAAoB,EAAe,EACzB,YAA0B,EAC1B,YAAyB,EACzB,OAAe;QAHL,OAAE,GAAF,EAAE,CAAa;QACzB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,iBAAY,GAAZ,YAAY,CAAa;QACzB,YAAO,GAAP,OAAO,CAAQ;QAKvB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAC5B,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,yDAAU,CAAC,QAAQ,EAAE,YAAY,EAAE,yDAAU,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAC1F,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;SACtC,CAAC;IACJ,CAAC;IAED,QAAQ;IACR,CAAC;IAGD,KAAK;QACH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,SAAS,CACtF,QAAQ,CAAC,EAAE;YACV,IAAI,QAAQ,CAAC,SAAS,CAAC,EAAE;gBACxB,cAAc,CAAC,OAAO,CAAC,iBAAiB,EAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC/D,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;aACjC;iBAAI;gBACJ,kDAAI,CAAC,IAAI,CAAC;oBACR,IAAI,EAAE,OAAO;oBACb,KAAK,EAAE,qBAAqB;oBAC5B,IAAI,EAAE,QAAQ,CAAC,KAAK,CAAC;iBACtB,CAAC,CAAC;aACH;QACF,CAAC,EACD,KAAK,CAAC,EAAE;YACN,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC;YAC3B,kDAAI,CAAC,IAAI,CAAC;gBACR,IAAI,EAAE,OAAO;gBACb,KAAK,EAAE,qBAAqB;gBAC5B,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,OAAO;aAC1B,CAAC,CAAC;QACL,CAAC,CACF;IAEH,CAAC;;4EAhDU,cAAc;8FAAd,cAAc,0GAHd,CAAC,0EAAW,CAAC;QCT1B,uEAEI;QAAA,yEACI;QAAA,yEACI;QAAA,yEAEI;QAAA,yEACI;QAAA,yEAII;QAAA,0EAEI;QAAA,qEAAI;QAAA,gEAAK;QAAA,4DAAK;QACd,gEACA;QACA,0EACI;QAAA,uEACA;QAAA,4EAA8C;QAAA,+DAAG;QAAA,4DAAQ;QAC7D,4DAAM;QAEN,0EACI;QAAA,uEACA;QAAA,6EAA8C;QAAA,2EAAU;QAAA,4DAAQ;QACpE,4DAAM;QAEN,8EAA0E;QAApD,uIAAS,WAAO,IAAC;QAAmC,+EAAc;QAAA,4DAAS;QACrG,4DAAO;QACX,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QAGV,4DAAO;;QAxBoE,0DAAsB;QAAtB,mFAAsB;;6FDCpF,cAAc;cAP1B,uDAAS;eAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,WAAW,EAAE,wBAAwB;gBACrC,SAAS,EAAE,CAAC,wBAAwB,CAAC;gBACrC,SAAS,EAAE,CAAC,0EAAW,CAAC;aAEzB;;;;;;;;;;;;;;AEbD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AAKyB;AAKT;AAEC;AACA;AACnB;;;AAiBhC,MAAM,UAAU;;yFAAV,UAAU;8IAAV,UAAU,kBAXV;YAEL,kEAAmB;YACnB,sEAAiB;YACjB,uEAAkB,CAAC,OAAO,EAAE;YAE5B,oDAAY;SAGf;mIAEQ,UAAU,mBAZJ,qEAAc,aAGzB,kEAAmB;QACnB,sEAAiB,sEAGjB,oDAAY;6FAKP,UAAU;cAbtB,sDAAQ;eAAC;gBACN,YAAY,EAAE,CAAC,qEAAc,CAAC;gBAC9B,OAAO,EAAE;oBAEL,kEAAmB;oBACnB,sEAAiB;oBACjB,uEAAkB,CAAC,OAAO,EAAE;oBAE5B,oDAAY;iBAGf;aACJ","file":"components-auth-auth-module.js","sourcesContent":["import { Injectable } from \"@angular/core\";\r\nimport { map } from 'rxjs/operators';\r\nimport { HttpClientModule, HttpHeaders, HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { config } from \"../services/config\";\r\n@Injectable()\r\nexport class UserService {\r\n  [x: string]: any;\r\n\r\n  public url;\r\n  public identity;\r\n  public token;\r\n  constructor(private _http: HttpClient) {\r\n    this.url = (config.local)? \"http://localhost:4000\": \"http://128.199.13.218:4000\";\r\n  }\r\n\r\n  login(rut, password): Observable<any> {\r\n    var params = {\r\n      rut: rut,\r\n      password: password\r\n    }\r\n\r\n    let headers = new HttpHeaders({\r\n      'Content-Type': 'application/json'\r\n    });\r\n\r\n    return this._http.post(this.url + '/api/v1/user/login', params, { headers: headers })\r\n      .pipe(map(res => res));\r\n  }\r\n\r\n  agregarDestinatarios(user): Observable<any> {\r\n    var params = user\r\n    const token = sessionStorage.getItem(\"identity-ripley\");\r\n\r\n    let headers = new HttpHeaders({\r\n      'Content-Type': 'application/json',\r\n      'Athorization': \"Bearer \" + token\r\n    });\r\n\r\n    return this._http.post(this.url + '/api/v1/user/add/destinatarios', params, { headers: headers })\r\n      .pipe(map(res => res));\r\n  }\r\n\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { LoginComponent } from './login/login.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: LoginComponent  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AuthRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { RutValidator } from 'ng9-rut';\nimport { UserService } from 'src/app/services/users.service';\nimport Swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n  providers: [UserService]\n\n})\nexport class LoginComponent implements OnInit {\n  public userForm: FormGroup;\n  public identity;\n  public token;\n\n  constructor(private fb: FormBuilder,\n    private rutValidator: RutValidator,\n    private _userService: UserService,\n    private _router: Router,\n\n\n\n  ) {\n    this.userForm = this.fb.group({\n      rut: ['', [Validators.required, rutValidator, Validators.minLength(8), this.rutValidator]],\n      password: ['', [Validators.required]]\n    })\n  }\n\n  ngOnInit(): void {\n  }\n\n\n  login() {\n    console.log(this.userForm);\n    this._userService.login(this.userForm.value.rut, this.userForm.value.password).subscribe(\n      response => {\n       if (response[\"success\"]) {\n        sessionStorage.setItem(\"identity-ripley\", response.data.token);\n        this._router.navigate(['/home']);\n       }else{\n        Swal.fire({\n          icon: 'error',\n          title: 'Error al autenticar',\n          text: response[\"msg\"],\n        });\n       }\n      },\n      error => {\n        console.log('error', error)\n        Swal.fire({\n          icon: 'error',\n          title: 'Error al autenticar',\n          text: error.error.message,\n        });\n      }\n    )\n\n  }\n}\n","<!DOCTYPE html>\r\n\r\n<body>\r\n\r\n    <div id=\"intro\" class=\"bg-image shadow-2-strong\">\r\n        <div class=\"mask d-flex align-items-center h-100\">\r\n            <div class=\"container\">\r\n\r\n                <div class=\"row justify-content-center\">\r\n                    <div class=\"col-xl-5 col-md-8\">\r\n\r\n\r\n\r\n                        <form class=\"bg-white rounded shadow-5-strong p-5\" [formGroup]=\"userForm\">\r\n\r\n                            <h3>Login</h3>\r\n                            <br>\r\n                            <!-- Email input -->\r\n                            <div class=\"form-outline mb-4\">\r\n                                <input type=\"email\" id=\"form1Example1\" class=\"form-control\" formControlName=\"rut\" formatRut>\r\n                                <label class=\"form-label\" for=\"form1Example1\">Rut</label>\r\n                            </div>\r\n                            <!-- Password input -->\r\n                            <div class=\"form-outline mb-4\">\r\n                                <input type=\"password\" id=\"form1Example2\" class=\"form-control\" formControlName=\"password\" />\r\n                                <label class=\"form-label\" for=\"form1Example2\">Contraseña</label>\r\n                            </div>\r\n                            <!-- Submit button -->\r\n                            <button type=\"submit\" (click)=\"login()\" class=\"btn btn-primary btn-block\">Iniciar Sesión</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</body>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\n\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { LoginComponent } from './login/login.component';\r\n\r\nimport { AuthRoutingModule } from './auth.routing.module';\r\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\r\nimport { Ng9RutModule } from 'ng9-rut';\r\n\r\n\r\n\r\n@NgModule({\r\n    declarations: [LoginComponent],\r\n    imports: [\r\n\r\n        ReactiveFormsModule,\r\n        AuthRoutingModule,\r\n        MDBBootstrapModule.forRoot(),\r\n\r\n        Ng9RutModule\r\n\r\n\r\n    ]\r\n})\r\nexport class AuthModule { }\r\n"],"sourceRoot":"webpack:///"}